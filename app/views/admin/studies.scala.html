@scripts = {
<link rel='stylesheet' href='@routes.Assets.at("stylesheets/fullcalendar.css")' />
<script src='@routes.Assets.at("javascripts/jquery-ui.custom.min.js")'></script>
<script src='@routes.Assets.at("javascripts/jquery.ui.touch-punch.min.js")'></script>
<script src='@routes.Assets.at("javascripts/moment-with-langs.min.js")'></script>
<script src='@routes.Assets.at("javascripts/fullcalendar.min.js")'></script>
}

@main(null, scripts, "admin") {
		<h3>Laufende Studien <span class="label label-default">@User.aktuelleStudien()</span></h3>

		<hr>

@for(LauFend <- Experiment.LauFend){
		<div class="row">
			<div class="col-sm-4 col-xs-6"><b>@LauFend.name</b></div>
			<div class="col-sm-5 col-xs-6">@LauFend.assignment</div>
			<div class="col-sm-3 col-xs-6">
			<a href="/completeStudy/@LauFend.id"><button class="btn btn-default tool btn-sm" data-toggle="tooltip" data-placement="top" title="Teilnahmen best��tigen"><span class="glyphicon glyphicon-ok"></span> </button></a>
			<a href="#"><button class="btn btn-sm btn-default tool" data-toggle="modal" data-target="#sessionCalendar" data-toggle="modal" data-target="#sessionCalendar" data-toggle="tooltip" data-placement="top" title="Kalender Anzeigen"><span class="glyphicon glyphicon-calendar"></span> </button></a>
			<a href="/edit/@LauFend.id" class="btn btn-default btn-sm" ><span class="glyphicon glyphicon-pencil"></span></a> 
			</div>
		</div>
}		
	
		<h3>Abgeschlossene Studien <span class="label label-default">@User.finishedStudies()</span></h3>
				<hr>		


	
@for(FiniShed <- Experiment.finishedStudies){
		<div class="row">
			<div class="col-sm-4 col-xs-6"><b>@FiniShed.name</b></div>
			<div class="col-sm-5 col-xs-6">@FiniShed.assignment</div>
			<div class="col-sm-3 col-xs-6">
			<a href="/completeStudy/@FiniShed.id"><button class="btn btn-default tool btn-sm" data-toggle="tooltip" data-placement="top" title="Teilnahmen best��tigen"><span class="glyphicon glyphicon-ok"></span> </button></a>
			<a href="#"><button class="btn btn-sm btn-default tool" data-toggle="modal" data-target="#sessionCalendar" data-toggle="modal" data-target="#sessionCalendar" data-toggle="tooltip" data-placement="top" title="Kalender Anzeigen"><span class="glyphicon glyphicon-calendar"></span> </button></a>
			<a href="/edit/@FiniShed.id" class="btn btn-default btn-sm" ><span class="glyphicon glyphicon-pencil"></span></a> 
			</div>
		</div>
}	
			

</div>





<div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

 <div class="modal-dialog ">
        <div class="modal-content ">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">��</button>
                 <h4 class="modal-title">Benutzer</h4>

            </div>

<div class="row">
			<div class="col-sm-1"></div>
			<div class="col-sm-1"><b>1</b></div>
			<div class="col-sm-6">Benutzer 1, 17.7.12, 13:00</div>
			<div class="col-sm-2">Verbucht</div>
			<div class="col-sm-1"></div>

		</div>

<div class="row">
			<div class="col-sm-1"></div>
			<div class="col-sm-1"><b>2</b></div>
			<div class="col-sm-6">Benutzer 1, 17.7.12, 13:00</div>
			<div class="col-sm-2">Verbucht</div>
			<div class="col-sm-1"></div>

		</div><div class="row">
			<div class="col-sm-1"></div>
			<div class="col-sm-1"><b>3</b></div>
			<div class="col-sm-6">Benutzer 1, 17.7.12, 13:00</div>
			<div class="col-sm-2">Verbucht</div>
			<div class="col-sm-1"></div>

		</div><div class="row">
			<div class="col-sm-1"></div>
			<div class="col-sm-1"><b>4</b></div>
			<div class="col-sm-6">Benutzer 1, 17.7.12, 13:00</div>
			<div class="col-sm-2">Verbucht</div>
			<div class="col-sm-1"></div>

		</div><div class="row">
			<div class="col-sm-1"></div>
			<div class="col-sm-1"><b>5</b></div>
			<div class="col-sm-6">Benutzer 1, 17.7.12, 13:00</div>
			<div class="col-sm-2">Verbucht</div>
			<div class="col-sm-1"></div>

		</div><div class="row">
			<div class="col-sm-1"></div>
			<div class="col-sm-1"><b>6</b></div>
			<div class="col-sm-6">Benutzer 1, 17.7.12, 13:00</div>
			<div class="col-sm-2">Verbucht</div>
			<div class="col-sm-1"></div>

		</div><div class="row">
			<div class="col-sm-1"></div>
			<div class="col-sm-1"><b>7</b></div>
			<div class="col-sm-6">Benutzer 1, 17.7.12, 13:00</div>
			<div class="col-sm-2">Verbucht</div>
			<div class="col-sm-1"></div>

		</div><div class="row">
			<div class="col-sm-1"></div>
			<div class="col-sm-1"><b>8</b></div>
			<div class="col-sm-6">Benutzer 1, 17.7.12, 13:00</div>
			<div class="col-sm-2">Verbucht</div>
			<div class="col-sm-1"></div>

		</div><div class="row">
			<div class="col-sm-1"></div>
			<div class="col-sm-1"><b>9</b></div>
			<div class="col-sm-6">Benutzer 1, 17.7.12, 13:00</div>
			<div class="col-sm-2">Verbucht</div>
			<div class="col-sm-1"></div>

		</div><div class="row">
			<div class="col-sm-1"></div>
			<div class="col-sm-1"><b>10</b></div>
			<div class="col-sm-6">Benutzer 10, 17.7.12, 13:00</div>
			<div class="col-sm-2">Verbucht</div>
			<div class="col-sm-1"></div>

		</div>


            <div class="modal-footer">
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->	
</div>





	<div class="modal fade" id="sessionCalendar">
		<div class="modal-dialog modal-lg mo">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					<button type="button" class="btn btn-primary pull-right" data-dismiss="modal">Speichern</button>
					<h4 class="modal-title">Sitzungen</h4>
					</div>
					<div class="modal-body">
						<div id="calendar"></div>

					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary" data-dismiss="modal">Speichern</button>
					</div>
				</div>
				<!-- /.modal-content --> 
			</div>
			<!-- /.modal-dialog --> 
		</div>
		<!-- /.modal --> 




<div id="regProbands" style="display:none">
		<div class="row">	
            <div class="col-md-9">Ralph Obermaier</div> 
            <div class="col-md-3"><button type="button" class="btn btn-danger btn-sm" id="me"><span class="glyphicon glyphicon-remove"></span></button></div>
		</div> <!-- row -->
			<div class="row">	
            <div class="col-md-9">Tanja Mangold</div> 
            <div class="col-md-3"><button type="button" class="btn btn-danger btn-sm" id="me"><span class="glyphicon glyphicon-remove"></span></button></div>
		</div> <!-- row -->
		<hr>
		<b>Probanden hinzuf��gen</b>
		<div class="row">
			<div class="col-sm-12">
				<input type="text" class="form-control" id="addProb" placeholder="Name des Probands" autofocus>
			</div>
						
</div>
		<div class="row" id="prob" style="display:none">
					<div class="col-xs-9">Max Mustermann</div>
					<div class="col-xs-3">
						<button type="button" class="btn btn-primary" id="addExp"><span class="glyphicon glyphicon-plus"></span></button>
					</div>
				</div>
				</div>




				<div class="row" id="event" style="display:none">
					<div class="col-xs-4"><span class="glyphicon glyphicon-calendar"></span> <span id="date"><span></div>
					<div class="col-xs-3"><span class="glyphicon glyphicon-time"></span> <span id="time"><span></div>
					<div class="col-xs-3"><span class="glyphicon glyphicon-user"></span> 3 <button type="button" class="btn btn-default" data-toggle="modal" data-target="#myModalTeilnehmer2"><span class="glyphicon glyphicon-pencil"></span></div>
					<div class="col-xs-2">
						<button type="button" class="btn btn-danger btn-sm eventdel"><span class="glyphicon glyphicon-remove"></span></button>
					</div>
				</div>

				<div id="eventFrame" style="display:none">
<button type="button" class="close" aria-hidden="true">&times;</button>
<span class="datetime"></span>
</div>
				<link rel="stylesheet" href="@routes.Assets.at("stylesheets/slider.css")"></script>
				<script src="@routes.Assets.at("javascripts/bootstrap-slider.js")"></script> 
				<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"></script> 
				<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/localization/messages_de.js"></script> 
			<script type="text/javascript" src="@routes.Assets.at("javascripts/calendar.js")"></script>
<script type="text/javascript">

$('#calendar').fullCalendar({
					defaultView: 'agendaWeek',
					header: {
						left:   '',
						center: '',
						right:  'today prev,next'
					},
					lang: 'de',
					allDaySlot: false,
					slotDuration: '00:15:00',
					minTime: '08:00:00',
					maxTime: '19:00:00',
					eventStartEditable: true,
					selectable: true,
					slotEventOverlap: false,
					axisFormat: 'H:mm',
					timeFormat: 'H:mm',
					columnFormat: 'dd., D.M',
					contentHeight: 1200,
					eventDrop: function(event, dayDelta, minuteDelta, allDay, revertFunc) {
								$('#calendar').fullCalendar('rerenderEvents');
					},
					events: [
				       
				        {				        	
				        	title: '',
				            start  : '2014-07-16T14:00',
				            end  : '2014-07-16T15:00'
				        },
				        {
				        	title: '',
				            start  : '2014-07-16T12:00',
				            end  : '2014-07-16T13:00'
				        }
				    ],
				    eventMouseover: function () {
				    	$(this).css('background-color','rgb(55, 114, 165)')
				    },
				    eventMouseout: function () {
				    	$(this).css('background-color','rgb(66, 139, 202)')
				    },
				    eventRender: function( event, element, view ) {
						$(element).popover({
				            title: 'Angemeldete Probanden',
				            placement: 'auto',
				            //container: 'body',
				            content: $('#regProbands').html(),
				            trigger: 'click',
				            html: true
				        })
				        $(element).on('show.bs.popover', function (e) {
				        	$('.fc-event').not(this).popover('hide');
				        	//e.stopPropagation();
				        });
						eventFrame = $('#eventFrame').clone();
						eventFrame.show();
						$(element).children().remove();
						datetime = event.start.format("H:mm")+"-"+event.end.format("H:mm");
						$(element).prepend($(eventFrame));
						eventFrame.find($('.datetime')).html(datetime+' <br><span class="glyphicon glyphicon-user"></span> 2/3');
						eventFrame.find($('.close')).click(function(e) {
							$('#calendar').fullCalendar('removeEvents',event._id);
							e.stopPropagation();
						});
					}
				});

</script>
}